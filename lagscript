local parts = getgenv().PartAmount
local finished = 0
local cparts = {}
game:GetService("StarterGui"):SetCore("SendNotification", {
	Title = "LAGGER v1",
	Text = "executed, give the lagger some time to create parts",
	Duration = 5
})
repeat
	if finished == 0 then
		local model = Instance.new("Model", workspace)
		model.Name = "LAGGER"

		for i = 1, 250 do
			local part = Instance.new("Part")
			part.Anchored = true
			part.Transparency = 0.5
			part.CanCollide = false
			part.Parent = model
			table.insert(cparts, part)
			wait()
		end
		finished += 1
	else
		local modeltoclone = workspace:FindFirstChild("LAGGER")
		if modeltoclone then
			local clone = modeltoclone:Clone()
			clone.Parent = workspace
			for _, obj in ipairs(clone:GetChildren()) do
				table.insert(cparts, obj)
			end
			finished += 1
		end
	end
	wait()
until finished == parts
game:GetService("StarterGui"):SetCore("SendNotification", {
	Title = "LAGGER v1",
	Text = "GET READY TO LAG!!!",
	Duration = 5
})
for _, laggr in ipairs(workspace:GetChildren()) do
	if laggr.Name == "LAGGER" then
		for _, part in ipairs(laggr:GetChildren()) do
			game:GetService("RunService").Heartbeat:Connect(function()
				local cframe = game.Workspace.CurrentCamera.CFrame
				for _, part in ipairs(cparts) do
					part.CFrame = cframe
				end
			end)
		end
	end
end
